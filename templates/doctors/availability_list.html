{% extends "base.html" %} 
{% block content %}
<div class="section-spacing">
  <div class="app-container">
    <div style="margin-bottom: 2rem; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
      <div>
        <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.5rem;">
          <div class="icon-container" style="background: hsl(var(--primary) / 0.1);">
            <i class="fas fa-calendar-alt"></i>
          </div>
          <h1 class="h1 mb-0">My Availability</h1>
        </div>
        <p class="small" style="color: hsl(var(--muted-foreground));">Manage your available time slots for appointments</p>
      </div>
      <a
        class="button button-primary"
        href="{% url 'doctors:availability_create' %}"
        style="gap: 0.5rem;"
      >
        <i class="fas fa-plus-circle"></i>
        Add New Slot
      </a>
    </div>

    {% if slots %}
    <div class="card" style="padding: 1.75rem;">
      <div class="table-container">
        <table class="table">
          <thead>
            <tr>
              <th><i class="fas fa-calendar" style="margin-right: 0.5rem;"></i>Date</th>
              <th><i class="fas fa-clock" style="margin-right: 0.5rem;"></i>Start Time</th>
              <th><i class="fas fa-clock" style="margin-right: 0.5rem;"></i>End Time</th>
              <th><i class="fas fa-info-circle" style="margin-right: 0.5rem;"></i>Status</th>
              <th><i class="fas fa-cog" style="margin-right: 0.5rem;"></i>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for s in slots %}
            <tr>
              <td>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <i class="far fa-calendar" style="color: hsl(var(--primary));"></i>
                  <strong>{{ s.date }}</strong>
                </div>
              </td>
              <td>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <i class="far fa-clock" style="color: hsl(var(--muted-foreground));"></i>
                  {{ s.start_time }}
                </div>
              </td>
              <td>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                  <i class="far fa-clock" style="color: hsl(var(--muted-foreground));"></i>
                  {{ s.end_time }}
                </div>
              </td>
              <td>
                {% if s.is_booked %}
                <span class="badge badge-accent" style="display: inline-flex; align-items: center; gap: 0.375rem;">
                  <i class="fas fa-lock"></i>
                  Booked
                </span>
                {% else %}
                <span class="badge badge-success" style="display: inline-flex; align-items: center; gap: 0.375rem;">
                  <i class="fas fa-check-circle"></i>
                  Available
                </span>
                {% endif %}
              </td>
              <td>
                {% if not s.is_booked %}
                <div style="display: flex; gap: 0.5rem;">
                  <a
                    href="{% url 'doctors:availability_update' s.pk %}"
                    class="button button-ghost"
                    style="padding: 0.375rem 0.75rem; gap: 0.375rem;"
                  >
                    <i class="fas fa-edit"></i>
                    Edit
                  </a>
                  <a
                    href="{% url 'doctors:availability_delete' s.pk %}"
                    class="button button-ghost"
                    style="color: hsl(var(--destructive)); padding: 0.375rem 0.75rem; gap: 0.375rem;"
                  >
                    <i class="fas fa-trash-alt"></i>
                    Delete
                  </a>
                </div>
                {% else %}
                <span class="small" style="color: hsl(var(--muted-foreground)); display: flex; align-items: center; gap: 0.5rem;">
                  <i class="fas fa-lock"></i>
                  Locked
                </span>
                {% endif %}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    {% else %}
    <div class="card" style="padding: 3rem;">
      <div class="empty-state">
        <div class="icon-container-large" style="margin: 0 auto 1rem; background: hsl(var(--muted)); color: hsl(var(--muted-foreground));">
          <i class="fas fa-calendar-times"></i>
        </div>
        <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.75rem;">No availability slots yet</h3>
        <p class="small" style="color: hsl(var(--muted-foreground)); margin-bottom: 1.5rem;">
          Click "Add New Slot" to create your first availability slot.
        </p>
        <a href="{% url 'doctors:availability_create' %}" class="button button-primary" style="gap: 0.5rem;">
          <i class="fas fa-plus-circle"></i>
          Add New Slot
        </a>
      </div>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
